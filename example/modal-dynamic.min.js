/*! See: https://github.com/FranBar1966/bootstrap-5-modal-dynamic */
(function(){"use strict";function e(){document.body.removeEventListener("click",t),document.body.addEventListener("click",t)}function t(e){const t=e.target.closest(".modal-dynamic");if(!t)return;e.target.closest("a")&&e.preventDefault();const a=e.target.getAttribute("href"),o=e.target.dataset.template||"#modalTemplate";let n=document.querySelector(a);if(!n){const e=document.querySelector(o);e&&(n=e.cloneNode(!0),n.id=a.substring(1),document.body.appendChild(n))}if(!n)return;const r=e.target.dataset.class,d=e.target.dataset.title,s=e.target.dataset.header,c=e.target.dataset.noheader,l=e.target.dataset.url,i=e.target.dataset.footer,u=e.target.dataset.nofooter,m=e.target.dataset.width||"",h=e.target.dataset.backdrop||"false",f=!e.target.dataset.keyboard||"true"===e.target.dataset.keyboard;if(r&&n.classList.add(...r.split(" ")),s){const e=n.querySelector(".modal-header"),t=document.querySelector(s);e&&t&&(e.innerHTML=t.innerHTML)}if(c){const e=n.querySelector(".modal-header");e&&e.classList.add("hidden","d-none")}if(d){const e=n.querySelector(".modal-title");e&&(e.innerHTML=d)}if(i){const e=n.querySelector(".modal-footer"),t=document.querySelector(i);e&&t&&(e.innerHTML=t.innerHTML)}if(u){const e=n.querySelector(".modal-footer");e&&e.classList.add("hidden","d-none")}if(m){const e=n.querySelector(".modal-dialog");if(e){const t=isNaN(m)||""===m?m:m+"px";e.style.maxWidth=t,e.style.width="auto"}}let y=bootstrap.Modal.getInstance(n);y||(y=new bootstrap.Modal(n,{keyboard:f,backdrop:h})),n.addEventListener("hidden.bs.modal",e=>{n.remove()}),n.addEventListener("shown.bs.modal",e=>{n.focus()}),y.show();const g=n.querySelector(".modal-body");if(l.startsWith("#")){const e=document.querySelector(l);g.innerHTML=e?e.innerHTML:"ERROR: Content not found"}else fetch(l,{method:"GET",headers:{"X-Requested-From-Modal":a.substring(1),"Requested-With-Ajax":"ajax"}}).then(e=>e.text()).then(e=>{g.innerHTML=e,window.dispatchEvent(new CustomEvent("neutralFetchCompleted",{detail:{element:n,url:l}}))}).catch(e=>{g.innerHTML=e.message,window.dispatchEvent(new CustomEvent("neutralFetchError",{detail:{element:n,url:l}}))})}e(),window.addEventListener("neutralFetchCompleted",()=>{e()})})();